
{% extends "base.html" %}

{% block content %}
<style>
  body{background-image: url(slack.png);}
  h3 {color:grey;}
  #rows {
  	opacity: 0.85;
  }
</style>

<div class="container-fluid">
	<div id="rows" class="row">
		<div class="col-md-12">
			<div class="row">
				<form action="" method="post" >
    			{{form.hidden_tag()}}
					<div class="col-md-4">
						<div class="btn-group">
							
							{{form.dt(class="dtpick")}}
						
							{{form.userChoice()}}
				
						
							{{form.channelChoice()}}
						

						</div>
						<button type="submit" class="btn btn-default">
							Submit
						</button>  
					</div>
				</form>


			<center><table class="table table-bordered table-striped">
				<thead>
					<tr>
						<th>User</th>
						<th>Channel</th>
						<th>Time</th>
						<th>Message</th>
					</tr>
				</thead>
				{% for userName in messageInfo %}
				<tbody>
					<tr>
						<td>{{ messageInfo[userName][0][3] }}</td>
						<td>{{ messageInfo[userName][0][1] }}</td>
						<td>{{ messageInfo[userName][0][2] }}</td>
						<td>{{ messageInfo[userName][0][0] }}
						{% if messageInfo[userName]|length > 1 %}
						<div class="container">
								<!-- Trigger the modal with a button -->
								<button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Messages</button>
								<!-- Modal -->
								  <div class="modal fade" id="myModal" role="dialog">
								    <div class="modal-dialog">
								    
								      <!-- Modal content-->
								      <div class="modal-content">
								        <div class="modal-header">
								          <button type="button" class="close" data-dismiss="modal">&times;</button>
								          <h4 class="modal-title">{{userName}}</h4>
								        </div>
								        <div class="modal-body">
								          <p>{%for i in range(1, messageInfo[userName]|length) %}
								          	<tbody>
												<tr>
													<td>{{ messageInfo[userName][i][3] }}</td>
													<td>{{ messageInfo[userName][i][1] }}</td>
													<td>{{ messageInfo[userName][i][2] }}</td>
													<td>{{ messageInfo[userName][i][0] }}</td>
												</tr>
											</tbody>
								          {%endfor%}</p>
								        </div>
								        <div class="modal-footer">
								          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
								        </div>
								      </div>
								      
								    </div>
								  </div>
							</div>

						</td>
						{% endif %}
					</tr>
					</tr>
				</tbody>
				{% endfor %}
			</table></center>

		</div>
	</div>
</div>

<script type="text/javascript">
	$(document).ready(function() {
		// https://select2.github.io/examples.html
		$(".tags-select").select2({});
	});
</script>



{% endblock %}